*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1200px 800px at 50% 20%,#2a2a2a 0%,#171616 55%,#0f0f10 100%);color:#1c1c1c}
:root{--paper:#f6f1e6;--accent:#ff8a3d}
a{color:inherit}button,a.navbtn{font:inherit}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.16);background:rgba(245,239,226,.92);position:sticky;top:0;z-index:5;backdrop-filter:blur(10px)}
.brand{display:flex;align-items:center;gap:10px}.brand__badge{width:30px;height:30px;border-radius:10px;display:grid;place-items:center;background:rgba(255,138,61,.18);border:1px solid rgba(255,138,61,.35);font-weight:800}
.brand__name{font-weight:800;font-size:14px;line-height:1.1}.brand__tag{font-size:12px;opacity:.75}
.topnav{display:flex;gap:8px;flex-wrap:wrap}.navbtn{padding:6px 10px;border-radius:12px;border:1px solid rgba(0,0,0,.10);background:rgba(255,255,255,.72);cursor:pointer}
.navbtn:hover{border-color:rgba(0,0,0,.18);background:rgba(255,255,255,.92)}
.navbtn.is-active{background:rgba(255,138,61,.18);border-color:rgba(255,138,61,.35)}
.console{min-height:calc(100vh - 110px);display:grid;place-items:center;padding:18px 12px}
.screen{width:min(1320px,94vw);aspect-ratio:16/10;min-height:72vh;border-radius:18px;border:1px solid rgba(255,255,255,.22);background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.06));box-shadow:0 30px 90px rgba(0,0,0,.55);overflow:hidden;position:relative}

/* Desktop: make the “cabinet” feel bigger without touching mobile */
@media (min-width: 1100px){
  body{font-size:17px}
  .console{padding:22px 14px}
  .screen{width:min(1680px,96vw)}
  .home__headline{font-size:30px}
}
.screen__bg{position:absolute;inset:0;opacity:.55;background:radial-gradient(70% 55% at 70% 30%,rgba(255,138,61,.18),transparent 60%),radial-gradient(60% 50% at 20% 65%,rgba(44,130,126,.16),transparent 60%),linear-gradient(180deg,rgba(245,239,226,.12),rgba(12,12,13,.35));pointer-events:none}
.screen:after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(to bottom,rgba(255,255,255,.05),rgba(255,255,255,.05) 1px,rgba(0,0,0,0) 4px,rgba(0,0,0,0) 7px);opacity:.22;pointer-events:none}
.screen__ui{position:relative;height:100%;display:grid;grid-template-columns:240px 1fr;gap:14px;padding:14px}
.screen__menu,.screen__content{border-radius:14px;border:1px solid rgba(255,255,255,.20);background:rgba(246,241,230,.90);box-shadow:0 10px 30px rgba(0,0,0,.22);overflow:hidden}
.screen__menu{padding:10px}
.screen__content{padding:14px;overflow:auto;overflow-x:hidden}
.menu__title{font-size:12px;opacity:.7;letter-spacing:.10em;margin-bottom:8px;color:rgba(0,0,0,.65)}
.menu__group{margin-bottom:6px}
.menu__item{display:block;width:100%;text-align:left;padding:9px 10px;border-radius:12px;border:1px solid transparent;background:transparent;cursor:pointer}
.menu__item:hover{background:rgba(255,138,61,.10)}
.menu__item.is-active{background:rgba(255,138,61,.14);border-color:rgba(255,138,61,.28)}
.menu__item--mini{padding:7px 10px;font-size:13px}
.menu__hint{margin-top:10px;font-size:12px;opacity:.7}
.menu__sep{height:1px;background:rgba(0,0,0,.10);margin:10px 0}
.aiguideTabs{display:flex;gap:10px;overflow:auto;padding:10px 6px;border-radius:14px;background:rgba(255,255,255,.55);border:1px solid rgba(0,0,0,.08)}
.aiguideTabs .btn{white-space:nowrap;flex:0 0 auto;padding:10px 14px}
.menu__scroll{max-height:calc(100% - 54px);overflow:auto;padding-right:6px}
.home__pressstart{display:grid;place-items:center;height:100%;font-weight:900;letter-spacing:.08em;color:rgba(0,0,0,.55);user-select:none;cursor:pointer}
.home__headline{margin:0 0 6px;font-size:26px}
.home__subhead{margin:0 0 12px;opacity:.85;line-height:1.35}
.card{border:1px solid rgba(0,0,0,.10);border-radius:16px;background:rgba(255,255,255,.78)}
.card__body{padding:12px}.card__title{margin:0 0 6px;font-size:20px}.card__title--sm{font-size:16px;margin-bottom:8px}
.card__desc{margin:0 0 10px;opacity:.86;line-height:1.4;white-space:pre-line}
.featured__label{font-size:12px;letter-spacing:.08em;opacity:.65;margin-bottom:6px;text-transform:uppercase}
.card__actions{display:flex;gap:8px;flex-wrap:wrap}
.card__note{margin:10px 0 0;opacity:.86;line-height:1.4}

.tips{display:grid;grid-template-columns:1fr;gap:10px;margin:10px 0}
.tips__box{border:1px solid rgba(0,0,0,.10);border-radius:14px;background:rgba(255,255,255,.60);padding:10px}
.tips__box--dont{background:rgba(255,255,255,.52)}
.tips__title{margin:0 0 6px;font-size:14px;letter-spacing:.04em;text-transform:uppercase;opacity:.75}
.tips__list{margin:0;padding-left:16px;line-height:1.35}
.tips__list li{margin:6px 0}
@media (min-width: 900px){
  .tips{grid-template-columns:1fr 1fr}
}
.btn{padding:9px 12px;border-radius:14px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.92);cursor:pointer;text-decoration:none;color:inherit}
.btn:hover{background:rgba(255,255,255,1);border-color:rgba(0,0,0,.18)}
.btn--primary{background:rgba(255,138,61,.18);border-color:rgba(255,138,61,.35)}
.buddy__layout{display:grid;grid-template-columns:240px 1fr;gap:12px}
.buddy__modules{border-radius:14px;border:1px solid rgba(0,0,0,.10);background:rgba(255,255,255,.75);padding:10px}
.buddy__title{font-weight:800;margin-bottom:10px}
.buddy__mod{display:block;width:100%;text-align:left;padding:9px 10px;border-radius:12px;border:1px solid transparent;background:transparent;cursor:pointer}
.buddy__mod:hover{background:rgba(0,0,0,.05)}
.buddy__mod.is-active{background:rgba(255,138,61,.12);border-color:rgba(255,138,61,.25)}

.statusline{min-height:18px;font-size:13px;color:rgba(0,0,0,.72)}
.statusline.is-on{animation:statusPop 260ms ease-out}
@keyframes statusPop{from{transform:translateY(2px);opacity:.65}to{transform:translateY(0);opacity:1}}

.unlock{margin-top:10px;padding:10px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:rgba(255,255,255,.65)}

.pc{display:flex;flex-direction:column;gap:12px}
.pc__empty{color:rgba(0,0,0,.65);font-size:14px}
.pc__sub{margin-top:6px;color:rgba(0,0,0,.55);font-size:13px}
.pc__section{border:1px solid rgba(0,0,0,.08);background:rgba(255,255,255,.65);border-radius:16px;padding:12px}
.pc__section--gold{border-color:rgba(255,138,61,.28);background:rgba(255,138,61,.06)}
.pc__h{font-weight:800;margin-bottom:6px}
.pc__list{margin:0;padding-left:18px;display:flex;flex-direction:column;gap:6px}
.pc__muted{color:rgba(0,0,0,.60);font-size:13px}
.pc__pre{white-space:pre-wrap;word-break:break-word;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:rgba(255,255,255,.78);padding:10px;margin:8px 0 0 0;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:14px;line-height:1.35}

/* Vault/Library long text readability */
.pre{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere;overflow:auto;max-height:260px;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:rgba(255,255,255,.78);padding:10px;margin:8px 0 0 0;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:14px;line-height:1.35}
.pre--sm{font-size:12px;line-height:1.35;padding:8px;border-radius:10px;max-height:240px}
.pc__actions{margin-top:10px}
.output--input{background:rgba(255,255,255,.85)}
.panels{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.panel{border-radius:14px;border:1px solid rgba(0,0,0,.10);background:rgba(255,255,255,.75);padding:12px}
.panel__title{margin:0 0 10px;font-size:14px}
.panel__note{margin:8px 0 10px;opacity:.80;line-height:1.35}
.field{display:block;margin:10px 0}.field__label{display:block;font-size:12px;opacity:.75;margin-bottom:6px}
.field__input,select,input[type=password]{width:100%;padding:10px 12px;border-radius:14px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.95);font-size:15px;line-height:1.45;}

.output{width:100%;padding:10px 12px;border-radius:14px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.95);resize:vertical;font-size:15px;line-height:1.45;}

.panel__actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.settings__row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:10px 0}

/* Status banners (inline, 2x larger + readable) */
.settings__status{
  margin-top:10px;
  display:inline-block;
  max-width:100%;
  font-size:clamp(16px, 1.6vw, 22px);
  line-height:1.25;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.12);
  background:rgba(255,255,255,.70);
  color:rgba(0,0,0,.78);
  word-break:break-word;
}
.settings__status:empty{display:none}

/* Dark themes: keep status readable */
body[data-theme="retro"] .settings__status,
body[data-theme="terminal"] .settings__status{
  border-color:rgba(255,255,255,.18);
  background:rgba(0,0,0,.28);
  color:rgba(240,240,255,.92);
}
body[data-theme="glitter"] .settings__status{
  background:rgba(255,255,255,.82);
  border-color:rgba(11,36,48,.12);
  color:rgba(11,36,48,.85);
}
.fold{border:1px solid rgba(0,0,0,.10);border-radius:14px;padding:8px 10px;background:rgba(255,255,255,.85);margin:10px 0}
.fold__sum{cursor:pointer;font-weight:700}
.fold__body{display:grid;gap:8px;margin-top:10px}.fold__body label{display:flex;gap:8px;align-items:center}
.block{border:1px solid rgba(0,0,0,.10);border-radius:16px;background:rgba(255,255,255,.78);padding:12px;margin:10px 0}
.block__text{white-space:pre-wrap;margin:0}
.footer{padding:10px 14px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap;font-size:12px;background:rgba(245,239,226,.92);border-top:1px solid rgba(255,255,255,.16)}
.footer__sep{opacity:.5}
body[data-theme=nostalgia]{filter:saturate(1.05)}body[data-theme=nostalgia] .screen:after{opacity:.30}
body[data-theme=modern] .screen__bg{opacity:.45;background:radial-gradient(70% 55% at 70% 30%,rgba(0,0,0,.10),transparent 60%),radial-gradient(60% 50% at 20% 65%,rgba(0,0,0,.08),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.10),rgba(12,12,13,.35))}
@media(max-width:720px){.screen__ui{grid-template-columns:1fr}.buddy__layout{grid-template-columns:1fr}.panels{grid-template-columns:1fr}.menu__scroll{max-height:220px}}

@media (max-width: 720px){
  body{
    background:linear-gradient(180deg,#f3ede3 0%, #e8ddce 100%);
  }
  .console{
    place-items:start center;
    padding:10px 10px 18px;
  }
  /* Mobile = cleaner (no cabinet frame look) */
  .screen{
    width:100%;
    max-width:100%;
    aspect-ratio:auto;
    min-height:calc(100vh - 150px);
    border-radius:22px;
    border:1px solid rgba(0,0,0,.10);
    background:rgba(246,241,230,.98);
    box-shadow:0 14px 34px rgba(0,0,0,.18);
  }
  .screen__bg{opacity:.12}
  .screen:after{opacity:.08}

  .screen__ui{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
    padding:10px;
    gap:10px;
    height:100%;
  }
  .screen__menu{display:block; max-height:220px; overflow:auto;}

  /* Single scroll area: content */
  .screen__content{
    height:100%;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
  }

  /* Prompting Buddy: horizontal module tabs + single column */
  .buddy__layout{grid-template-columns:1fr}
  .buddy__modules{
    display:flex;
    gap:8px;
    overflow-x:auto;
    padding:10px;
    border-radius:14px;
    position:sticky;
    top:0;
    z-index:5;
    background:rgba(255,255,255,.92);
    backdrop-filter: blur(6px);
    border:1px solid var(--line);
  }
  .buddy__title{display:none}
  .buddy__mod{
    white-space:nowrap;
    flex:0 0 auto;
    padding:12px 14px;
    font-size:16px;
    min-width:140px;
  }
  .panels{grid-template-columns:1fr}
  .menu__scroll{max-height:none}

  /* Bigger “popup” panels on mobile */
  .screen__ui{padding:12px}
  .screen__menu{padding:14px}
  .screen__content{padding:16px}
  .menu__item{font-size:15px}
  .menu__item--mini{font-size:14px}
  .panel{padding:14px}
  .output--input{min-height:260px}

}

.pc__usage{font-size:12px;opacity:.82;margin:-6px 0 10px 0;}
.settings__note{font-size:12px;opacity:.82;margin-top:8px;line-height:1.35;}

.output--input{width:100%;min-height:220px;resize:vertical;overflow:auto;-webkit-overflow-scrolling:touch}

/* Sprint 2 — Buddy mobile readability (no hiding; reduce scroll by density) */
@media (max-width: 720px){
  .pc{gap:10px}
  .pc__section{padding:10px;border-radius:14px}
  .pc__h{margin-bottom:4px}
  .pc__sub{margin-top:4px;font-size:12px;line-height:1.25}
  .pc__list{gap:4px;padding-left:16px}
  .pc__list li{margin:0}
  .pc__muted{font-size:12px}
  .pc__pre{font-size:12px;line-height:1.35;padding:8px;border-radius:10px}
  .pc__actions{margin-top:8px}
  /* Golden Way = hero (warm “aha”): clearer frame, same content */
  .pc__section--gold{
    border-color:rgba(255,138,61,.38);
    background:rgba(255,138,61,.09);
    box-shadow: inset 0 2px 0 rgba(255,138,61,.22);
  }
  .pc__section--gold .btn--primary{width:100%;text-align:center}
}


/* =========================================================
   OU Themes v2 (Modern default) — Retro + Nostalgia variants
   Quick wins:
   - Neon Grid: faint neon outline on focus
   - Candy Console: bold outline + pressed effect
   - Cardboard Arcade: warmer, softer shadows + lower contrast
   - Magnetic Tape: pill buttons + glossy highlights + VHS lines
   ========================================================= */

/* Shared variables (don’t break existing layout) */
body{ --ou-line: rgba(0,0,0,.12); --ou-panel: rgba(246,241,230,.90); --ou-card: rgba(255,255,255,.78); }
.screen__menu,.screen__content{ border-color: rgba(255,255,255,.20); }
.field__input,select,input[type=password],.output{ outline: none; }

/* ---------- Modern (keep current look) ---------- */
body[data-theme="modern"]{ filter:none; }
body[data-theme="modern"] .screen:after{ opacity:.22; }
body[data-theme="modern"]{ --ou-focus: rgba(0,0,0,.18); }

/* ---------- Retro base ---------- */
body[data-theme="retro"]{
  color:#eaeaf2;
  background: radial-gradient(1200px 800px at 50% 20%, #0a0a14 0%, #070712 55%, #04040b 100%);
}
body[data-theme="retro"] .topbar,
body[data-theme="retro"] .footer{
  background: rgba(10,10,20,.55);
  border-color: rgba(255,255,255,.12);
  color:#f0f0ff;
}
body[data-theme="retro"] .screen{
  border-color: rgba(255,255,255,.18);
  box-shadow: 0 34px 100px rgba(0,0,0,.75);
}
body[data-theme="retro"] .screen__menu,
body[data-theme="retro"] .screen__content{
  background: rgba(8,8,16,.66);
  border-color: rgba(255,255,255,.14);
  color:#f0f0ff;
}
body[data-theme="retro"] .menu__title{ color: rgba(255,255,255,.75); }
body[data-theme="retro"] .menu__item{ color:#f0f0ff; }
body[data-theme="retro"] .menu__item:hover{ background: rgba(255,255,255,.06); }
body[data-theme="retro"] .card{ background: rgba(15,15,28,.55); border-color: rgba(255,255,255,.14); }
body[data-theme="retro"] .panel,
body[data-theme="retro"] .pc__section,
body[data-theme="retro"] .block,
body[data-theme="retro"] .tips__box{
  background: rgba(15,15,28,.50);
  border-color: rgba(255,255,255,.14);
  color:#f0f0ff;
}
body[data-theme="retro"] .pc__pre,
body[data-theme="retro"] .pre,
body[data-theme="retro"] .output,
body[data-theme="retro"] .field__input,
body[data-theme="retro"] .field__textarea,
body[data-theme="retro"] select,
body[data-theme="retro"] input[type=password]{
  background: rgba(0,0,0,.35);
  border-color: rgba(255,255,255,.18);
  color:#f0f0ff;
}

/* Retro Variant A — Neon Grid (TRON-ish) */
body[data-theme="retro"][data-variant="neon-grid"]{
  --neon-cyan: #00f3ff;
  --neon-mag: #ff00ff;
  --neon-yel: #ffff00;
}
body[data-theme="retro"][data-variant="neon-grid"] .screen__bg{
  opacity:.85;
  background:
    radial-gradient(60% 45% at 65% 30%, rgba(0,243,255,.18), transparent 62%),
    radial-gradient(55% 42% at 22% 68%, rgba(255,0,255,.16), transparent 62%),
    linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.55));
}
body[data-theme="retro"][data-variant="neon-grid"] .screen:before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.18;
  background-image:
    linear-gradient(rgba(0,243,255,.35) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,0,255,.28) 1px, transparent 1px);
  background-size: 48px 48px;
  mix-blend-mode: screen;
}
body[data-theme="retro"][data-variant="neon-grid"] .btn--primary{
  border-color: rgba(0,243,255,.45);
  background: rgba(0,243,255,.10);
}
body[data-theme="retro"][data-variant="neon-grid"] .menu__item.is-active{
  border-color: rgba(0,243,255,.35);
  background: rgba(0,243,255,.10);
}
/* Quick win: faint neon outline on focus */
body[data-theme="retro"][data-variant="neon-grid"] .btn:focus,
body[data-theme="retro"][data-variant="neon-grid"] .btn:focus-visible,
body[data-theme="retro"][data-variant="neon-grid"] .field__input:focus,
body[data-theme="retro"][data-variant="neon-grid"] select:focus,
body[data-theme="retro"][data-variant="neon-grid"] .output:focus{
  box-shadow:
    0 0 0 2px rgba(0,243,255,.38),
    0 0 18px rgba(255,0,255,.18);
  border-color: rgba(0,243,255,.55);
}

/* Retro Variant B — Candy Console (chunky 90s) */
body[data-theme="retro"][data-variant="candy-console"]{
  --c1:#6b5b95; --c2:#ff6b6b; --c3:#4ecdc4; --c4:#ffe66d; --c5:#9b5de5;
}
body[data-theme="retro"][data-variant="candy-console"] .screen__bg{
  opacity:.90;
  background:
    radial-gradient(60% 55% at 70% 30%, rgba(78,205,196,.22), transparent 62%),
    radial-gradient(60% 55% at 25% 70%, rgba(255,107,107,.20), transparent 62%),
    linear-gradient(180deg, rgba(155,93,229,.10), rgba(0,0,0,.60));
}
/* CRT “screen door” overlay */
body[data-theme="retro"][data-variant="candy-console"] .screen:after{
  opacity:.28;
}
body[data-theme="retro"][data-variant="candy-console"] .screen:before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.10;
  background:
    repeating-linear-gradient(90deg, rgba(255,255,255,.22) 0 1px, transparent 1px 3px);
  mix-blend-mode: overlay;
}
/* Quick win: bold outline + pressed effect */
body[data-theme="retro"][data-variant="candy-console"] .btn{
  border: 2px solid rgba(0,0,0,.80);
  box-shadow: 0 4px 0 rgba(0,0,0,.55);
  border-radius: 14px;
}
body[data-theme="retro"][data-variant="candy-console"] .btn--primary{
  background: rgba(255,230,109,.22);
}
body[data-theme="retro"][data-variant="candy-console"] .btn:active{
  transform: translateY(2px);
  box-shadow: 0 2px 0 rgba(0,0,0,.55);
}
body[data-theme="retro"][data-variant="candy-console"] .menu__item.is-active{
  border: 2px solid rgba(0,0,0,.78);
  background: rgba(255,255,255,.08);
}

/* ---------- Nostalgia base ---------- */
body[data-theme="nostalgia"]{
  filter: saturate(1.02);
  background: radial-gradient(1200px 800px at 50% 20%, #2a2d43 0%, #141523 60%, #0f1018 100%);
}
body[data-theme="nostalgia"] .topbar,
body[data-theme="nostalgia"] .footer{
  background: rgba(232,216,201,.92);
}
body[data-theme="nostalgia"] .screen__menu,
body[data-theme="nostalgia"] .screen__content{
  background: rgba(246,241,230,.92);
}

/* Nostalgia Variant A — Cardboard Arcade (worn playmat) */
body[data-theme="nostalgia"][data-variant="cardboard-arcade"]{
  --paperA:#e8d8c9; --rose:#c44569; --denim:#5d8aa8; --sage:#b2ac88; --apricot:#d9a066;
}
body[data-theme="nostalgia"][data-variant="cardboard-arcade"]{
  filter: saturate(.96) contrast(.96);
}
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .screen{
  background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.06));
}
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .screen__bg{
  opacity:.35;
  background:
    radial-gradient(70% 55% at 70% 30%, rgba(217,160,102,.22), transparent 60%),
    radial-gradient(65% 52% at 20% 65%, rgba(93,138,168,.18), transparent 60%),
    linear-gradient(180deg, rgba(232,216,201,.20), rgba(12,12,13,.30));
}
/* paper/cardboard texture */
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .screen__menu,
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .screen__content{
  box-shadow: 0 10px 26px rgba(0,0,0,.18);
  background:
    radial-gradient(circle at 20% 10%, rgba(255,255,255,.30), transparent 42%),
    radial-gradient(circle at 80% 70%, rgba(0,0,0,.06), transparent 46%),
    repeating-linear-gradient(0deg, rgba(0,0,0,.015) 0 2px, transparent 2px 6px),
    rgba(246,241,230,.94);
}
/* Quick win: warmer shadows + softer borders */
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .card,
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .panel,
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .pc__section,
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .block{
  border-color: rgba(0,0,0,.09);
  box-shadow: 0 8px 18px rgba(120,80,40,.12);
}
body[data-theme="nostalgia"][data-variant="cardboard-arcade"] .btn--primary{
  background: rgba(196,69,105,.10);
  border-color: rgba(196,69,105,.25);
}

/* Nostalgia Variant B — Magnetic Tape (VHS dream) */
body[data-theme="nostalgia"][data-variant="magnetic-tape"]{
  --indigo:#2a2d43; --pink:#ff7eb3; --aqua:#7afcff; --amber:#ffd166; --lav:#b3a6ff;
}
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .screen__bg{
  opacity:.70;
  background:
    radial-gradient(60% 55% at 70% 30%, rgba(122,252,255,.18), transparent 62%),
    radial-gradient(60% 55% at 25% 70%, rgba(255,126,179,.16), transparent 62%),
    linear-gradient(180deg, rgba(42,45,67,.16), rgba(12,12,13,.42));
}
/* VHS tracking lines + slight color bleed */
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .screen:after{
  opacity:.34;
}
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .screen:before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:.18;
  background:
    repeating-linear-gradient(to bottom, rgba(255,255,255,.06) 0 1px, transparent 1px 6px),
    radial-gradient(1200px 600px at 50% 110%, rgba(255,126,179,.12), transparent 55%);
  mix-blend-mode: screen;
}
/* Quick win: pill buttons + glossy highlight */
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .btn{
  border-radius: 999px;
  position: relative;
  overflow: hidden;
}
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .btn:before{
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,.22), transparent 55%);
  opacity:.55;
  pointer-events:none;
}
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .btn--primary{
  border-color: rgba(122,252,255,.35);
  background: rgba(122,252,255,.12);
}
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .btn:focus,
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .btn:focus-visible,
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .field__input:focus,
body[data-theme="nostalgia"][data-variant="magnetic-tape"] select:focus,
body[data-theme="nostalgia"][data-variant="magnetic-tape"] .output:focus{
  box-shadow: 0 0 0 2px rgba(122,252,255,.28);
  border-color: rgba(122,252,255,.45);
}

/* ---------- Readability safety net (no black-on-black) ---------- */
body[data-theme="retro"],
body[data-theme="glitter"]{
  color:#f2f4ff;
}
body[data-theme="retro"] .btn,
body[data-theme="glitter"] .btn{
  background: rgba(255,255,255,.08);
  border-color: rgba(255,255,255,.18);
  color:#f2f4ff;
}
body[data-theme="retro"] .btn:hover,
body[data-theme="glitter"] .btn:hover{
  background: rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.24);
}
body[data-theme="retro"] .btn--primary,
body[data-theme="glitter"] .btn--primary{
  background: rgba(122,252,255,.12);
  border-color: rgba(122,252,255,.30);
}
body[data-theme="retro"] .field__label,
body[data-theme="glitter"] .field__label{ color: rgba(255,255,255,.82); }
body[data-theme="retro"] .muted,
body[data-theme="glitter"] .muted{ color: rgba(255,255,255,.70); }

/* ---------- Modal (Unlock, Coach, Golden) ---------- */
.modal_backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding: 72px 16px 24px;
  z-index: 9999;
}
.modal{
  width: min(720px, 100%);
  border-radius: 18px;
  background: rgba(255,255,255,.96);
  border: 1px solid rgba(0,0,0,.10);
  box-shadow: 0 30px 100px rgba(0,0,0,.40);
  overflow:hidden;
}
.modal__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 14px 16px;
  background: rgba(250,250,250,.92);
  border-bottom: 1px solid rgba(0,0,0,.08);
}
.modal__body{ padding: 16px; }
body[data-theme="retro"] .modal,
body[data-theme="glitter"] .modal{
  background: rgba(12,12,20,.92);
  border-color: rgba(255,255,255,.14);
  color:#f2f4ff;
}
body[data-theme="retro"] .modal__head,
body[data-theme="glitter"] .modal__head{
  background: rgba(8,8,14,.72);
  border-bottom-color: rgba(255,255,255,.12);
}

/* ---------- MySpace-ish theme (animated, playful) ---------- */
body[data-theme="glitter"]{
  background:
    radial-gradient(1200px 800px at 20% 20%, rgba(255,0,200,.22), transparent 55%),
    radial-gradient(900px 700px at 80% 40%, rgba(0,220,255,.18), transparent 55%),
    radial-gradient(900px 700px at 40% 85%, rgba(255,210,0,.14), transparent 55%),
    linear-gradient(180deg, #070711, #05050a);
}
body[data-theme="glitter"] .screen:before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.22;
  background:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.9) 0 1px, transparent 2px),
    radial-gradient(circle at 35% 60%, rgba(255,255,255,.8) 0 1px, transparent 2px),
    radial-gradient(circle at 60% 30%, rgba(255,255,255,.85) 0 1px, transparent 2px),
    radial-gradient(circle at 80% 70%, rgba(255,255,255,.75) 0 1px, transparent 2px);
  background-size: 220px 220px;
  animation: pbStars 12s linear infinite;
}
@keyframes pbStars{ from{ transform: translateY(0); } to{ transform: translateY(80px); } }

body[data-theme="glitter"] .topbar,
body[data-theme="glitter"] .footer{
  background: rgba(10,10,16,.70);
  border-color: rgba(255,255,255,.12);
  color:#f2f4ff;
}
body[data-theme="glitter"] .screen__menu,
body[data-theme="glitter"] .screen__content{
  background: rgba(10,10,16,.62);
  border-color: rgba(255,255,255,.14);
}
body[data-theme="glitter"] .menu__item.is-active{
  background: rgba(255,0,200,.14);
  border-color: rgba(255,0,200,.28);
}
body[data-theme="glitter"] .btn{
  border-radius: 999px;
  position: relative;
  overflow:hidden;
}
body[data-theme="glitter"] .btn:before{
  content:"";
  position:absolute;
  inset:-1px;
  pointer-events:none;
  background: linear-gradient(90deg, rgba(255,0,200,.0), rgba(255,0,200,.26), rgba(0,220,255,.22), rgba(255,210,0,.18), rgba(255,0,200,.0));
  transform: translateX(-40%);
  opacity:.55;
}
body[data-theme="glitter"] .btn:hover{
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 10px 26px rgba(0,0,0,.45);
}
body[data-theme="glitter"] .btn:hover:before{
  animation: pbShimmer .8s ease forwards;
}
@keyframes pbShimmer{ to{ transform: translateX(40%); opacity:.75; } }

/* ---------- Library: subtle per-category accents ---------- */
.lib__item{ position:relative; }
.lib__item:before{
  content:"";
  position:absolute;
  left:0; top:0; bottom:0;
  width: 6px;
  border-radius: 14px 0 0 14px;
  background: rgba(255,138,61,.28);
}
.lib__item[data-cat="Writing"]:before{ background: rgba(196,69,105,.30); }
.lib__item[data-cat="Coding"]:before{ background: rgba(122,252,255,.26); }
.lib__item[data-cat="Research / OSINT"]:before{ background: rgba(255,210,0,.24); }
.lib__item[data-cat="Visuals"]:before{ background: rgba(155,93,229,.28); }
.lib__item[data-cat="Creators"]:before{ background: rgba(78,205,196,.26); }
.lib__item[data-cat="Business"]:before{ background: rgba(93,138,168,.26); }
.lib__item[data-cat="Life / Mood"]:before{ background: rgba(217,160,102,.26); }


/* Prompting Buddy Phase 0.5: internal scroll areas for result cards */
.pb__scroll{
  max-height:240px;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}
@media (max-width: 720px){
  .pb__scroll{max-height:220px}
}

/* Library */
.lib__head{ display:flex; justify-content:space-between; gap:12px; align-items:flex-start; }
.lib__title{ font-weight:700; font-size:16px; }
.lib__meta{ margin-top:6px; display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.lib__actions{ display:flex; flex-wrap:wrap; gap:6px; justify-content:flex-end; }
.lib__notes{ margin-top:10px; font-size:14px; color:rgba(0,0,0,.72); }

/* Retro variants: Library notes must be readable on dark cards */
body[data-theme="retro"][data-variant="neon-grid"] .lib__notes,
body[data-theme="retro"][data-variant="candy-console"] .lib__notes{
  color: rgba(255,255,255,.86);
}
.lib__pre{ margin-top:10px; }


.lib__filters{
  margin-top: 10px;
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  align-items:flex-end;
}
.field--inline{ margin:0; }
.check{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  user-select:none;
}
.check input{ transform: translateY(1px); }

/* Theme picker - premium chips */
.theme-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
}
.theme-chip{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.12);
  background:rgba(255,255,255,.65);
  box-shadow:0 8px 22px rgba(0,0,0,.08);
  cursor:pointer;
  user-select:none;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.theme-chip:hover{ transform: translateY(-1px); box-shadow:0 12px 28px rgba(0,0,0,.12); }
.theme-chip input{ transform: translateY(1px); }
.theme-chip:has(input:checked){
  border-color: rgba(0,0,0,.22);
  box-shadow:0 12px 32px rgba(0,0,0,.14);
}
@media (max-width:760px){
  .theme-grid{ grid-template-columns:1fr; }
}

.btn--star{
  min-width: 40px;
}

/* Make sure text is readable in dark themes */
body[data-theme="retro"] .btn,
body[data-theme="retro"] .navbtn,
body[data-theme="retro"] .menu__item,
body[data-theme="retro"] .muted,
body[data-theme="retro"] .field__label{color:#f0f0ff}
body[data-theme="retro"] .btn{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.18)}
body[data-theme="retro"] .btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.28)}
body[data-theme="retro"] .btn--primary{background:rgba(0,243,255,.12);border-color:rgba(0,243,255,.40)}
body[data-theme="retro"] .modal{background:rgba(10,10,20,.92);border-color:rgba(255,255,255,.18)}
body[data-theme="retro"] .modal__head{background:rgba(12,12,22,.92);border-bottom-color:rgba(255,255,255,.14)}
body[data-theme="retro"] .field__input, body[data-theme="retro"] select, body[data-theme="retro"] .output{color:#f0f0ff}

body[data-theme="nostalgia"] .modal{background:rgba(246,241,230,.97)}

/* -----------------------------
   MySpace-ish theme (fun)
------------------------------ */
@keyframes pbStars{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-120px,90px,0)}}
@keyframes pbWiggle{0%,100%{transform:translateY(0)}50%{transform:translateY(-1px)}}

body[data-theme="glitter"]{
  color:#1a1026;
  background:
    radial-gradient(1000px 700px at 20% 10%, rgba(255,124,216,.18), transparent 55%),
    radial-gradient(900px 650px at 90% 35%, rgba(126,252,255,.18), transparent 55%),
    linear-gradient(180deg, #f6f0ff 0%, #e9f3ff 45%, #fff1f7 100%);
}
body[data-theme="glitter"] .screen__bg{opacity:.55}
body[data-theme="glitter"] .screen__bg:before{
  content:"";
  position:absolute;inset:-40px;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.9) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.7) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.6) 0 1px, transparent 2px);
  background-size: 120px 120px, 180px 180px, 240px 240px;
  background-position: 0 0, 40px 70px, 80px 20px;
  opacity:.45;
  animation: pbStars 14s linear infinite;
}
body[data-theme="glitter"] .topbar,
body[data-theme="glitter"] .footer{background:rgba(255,255,255,.86)}
body[data-theme="glitter"] .screen{border-color:rgba(76,0,255,.18);box-shadow:0 34px 110px rgba(12,12,18,.32)}
body[data-theme="glitter"] .screen__menu,
body[data-theme="glitter"] .screen__content{background:rgba(255,255,255,.82)}
body[data-theme="glitter"] .btn{border:2px solid rgba(76,0,255,.18);background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));box-shadow: 0 8px 0 rgba(76,0,255,.08);border-radius: 999px;animation: pbWiggle 2.6s ease-in-out infinite}
body[data-theme="glitter"] .btn:hover{transform:translateY(-1px) scale(1.01);box-shadow: 0 10px 0 rgba(255,0,184,.10)}
body[data-theme="glitter"] .btn:active{transform:translateY(2px);box-shadow: 0 6px 0 rgba(76,0,255,.08)}
body[data-theme="glitter"] .btn--primary{background:linear-gradient(180deg, rgba(255,198,233,.72), rgba(126,252,255,.36));border-color:rgba(255,0,184,.18)}
body[data-theme="glitter"] .menu__item.is-active{background:rgba(255,198,233,.45);border-color:rgba(255,0,184,.18)}

/* -----------------------------
   Terminal theme (high contrast, no black-on-black)
------------------------------ */
body[data-theme="terminal"]{
  color:#d6ffd9;
  background: radial-gradient(1200px 800px at 15% 10%, rgba(0,255,128,.18), transparent 55%),
              radial-gradient(900px 650px at 85% 25%, rgba(0,190,255,.16), transparent 55%),
              linear-gradient(180deg, #04170e 0%, #02110a 100%);
}
body[data-theme="terminal"] .topbar,
body[data-theme="terminal"] .footer{background:rgba(2,18,10,.86);border-color:rgba(0,255,128,.18)}
body[data-theme="terminal"] .screen{border-color:rgba(0,255,128,.16);box-shadow:0 34px 110px rgba(0,0,0,.55)}
body[data-theme="terminal"] .screen__menu,
body[data-theme="terminal"] .screen__content{background:rgba(2,18,10,.78)}
body[data-theme="terminal"] .card{background:rgba(6,30,18,.72);border-color:rgba(0,255,128,.12)}
body[data-theme="terminal"] .btn{background:rgba(0,255,128,.10);border-color:rgba(0,255,128,.22)}
body[data-theme="terminal"] .btn:hover{background:rgba(0,255,128,.14);border-color:rgba(0,255,128,.30)}
body[data-theme="terminal"] .btn--primary{background:rgba(0,255,128,.18);border-color:rgba(0,255,128,.38)}
body[data-theme="terminal"] .field__input, body[data-theme="terminal"] select, body[data-theme="terminal"] .output{color:#d6ffd9;background:rgba(0,0,0,.22);border-color:rgba(0,255,128,.18)}
body[data-theme="terminal"] .muted{color:rgba(214,255,217,.72)}
body[data-theme="terminal"] .menu__item.is-active{background:rgba(0,255,128,.14);border-color:rgba(0,255,128,.28)}

/* -----------------------------
   Library: make cards visually different per category
------------------------------ */
.lib__item{position:relative}
.lib__item:before{content:"";position:absolute;left:0;top:0;bottom:0;width:6px;border-radius:14px 0 0 14px;background:rgba(0,0,0,.10)}
.lib__item[data-cat="Daily drivers"]:before{background:rgba(255,138,61,.55)}
.lib__item[data-cat="Writing"]:before{background:rgba(196,69,105,.55)}
.lib__item[data-cat="Coding"]:before{background:rgba(0,243,255,.45)}
.lib__item[data-cat="Research / OSINT"]:before{background:rgba(93,138,168,.55)}
.lib__item[data-cat="Visuals"]:before{background:rgba(255,126,179,.55)}
.lib__item[data-cat="Creators"]:before{background:rgba(217,160,102,.55)}
.lib__item[data-cat="Business"]:before{background:rgba(155,93,229,.55)}
.lib__item[data-cat="Life / Mood"]:before{background:rgba(78,205,196,.55)}


/* =============================
   Theme reskins (B)
   Themes can change layout slightly (spacing, nav, buttons, effects)
   ============================= */

/* Common helper chips/badges */
.chip{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid rgba(0,0,0,.10); background:rgba(255,255,255,.75); font-size:12px; line-height:18px; }
.chip__dot{ width:8px; height:8px; border-radius:50%; background:rgba(0,0,0,.35); }
.chip--muted{ opacity:.85; }

/* Library meta chips */
.lib__meta{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px; }
.lib__meta .chip{ background:rgba(0,0,0,.22); }

/* Fancy Glitter (Tiffany teal + gold) */
body[data-theme="glitter"]{
  --glit-bg1:#f5fbff;
  --glit-bg2:#fff6ef;
  --glit-ink:#0b2430;
  --glit-muted:#36525f;
  --glit-teal:#12b6b0;
  --glit-gold:#d8b36a;
  --glit-panel:rgba(255,255,255,.82);
  --glit-border:rgba(18,182,176,.22);
  color:var(--glit-ink);
  background:radial-gradient(1200px 800px at 20% 10%, rgba(18,182,176,.18), transparent 55%),
             radial-gradient(900px 600px at 80% 15%, rgba(216,179,106,.18), transparent 60%),
             linear-gradient(180deg, var(--glit-bg1), var(--glit-bg2));
}
body[data-theme="glitter"] .shell{ background:rgba(255,255,255,.08); box-shadow:0 24px 90px rgba(12,30,40,.22); }
body[data-theme="glitter"] .screen{ background:rgba(255,255,255,.10); }
body[data-theme="glitter"] .panel{ background:var(--glit-panel); border-color:var(--glit-border); }
body[data-theme="glitter"] .nav{ background:rgba(255,255,255,.72); border-color:var(--glit-border); }
body[data-theme="glitter"] .nav__title{ color:var(--glit-muted); letter-spacing:.14em; }
body[data-theme="glitter"] .navbtn{ border-color:rgba(18,182,176,.18); }
body[data-theme="glitter"] .navbtn--active{ background:linear-gradient(90deg, rgba(18,182,176,.22), rgba(216,179,106,.16)); border-color:rgba(18,182,176,.35); }
body[data-theme="glitter"] .topbar{ background:rgba(255,255,255,.80); border-color:rgba(216,179,106,.22); }
body[data-theme="glitter"] .pill{ border-color:rgba(18,182,176,.22); }
body[data-theme="glitter"] .pill.pill--active{ background:linear-gradient(90deg, rgba(18,182,176,.24), rgba(216,179,106,.18)); }
body[data-theme="glitter"] .btn{ border-color:rgba(216,179,106,.30); }
body[data-theme="glitter"] .btn--primary{
  background:linear-gradient(90deg, rgba(18,182,176,.92), rgba(216,179,106,.92));
  border-color:rgba(255,255,255,.35);
  color:#062026;
}
body[data-theme="glitter"] .btn--primary:hover{ filter:saturate(1.08) brightness(1.03); transform:translateY(-1px); }
body[data-theme="glitter"] .field, body[data-theme="glitter"] textarea, body[data-theme="glitter"] input{
  background:rgba(255,255,255,.92);
  color:var(--glit-ink);
  border-color:rgba(18,182,176,.18);
}
body[data-theme="glitter"] .muted{ color:var(--glit-muted); }
body[data-theme="glitter"] .modal{ background:rgba(255,255,255,.92) !important; border-color:rgba(18,182,176,.25) !important; }
body[data-theme="glitter"] .modal__head{ background:rgba(255,255,255,.94) !important; border-bottom-color:rgba(18,182,176,.18) !important; }
body[data-theme="glitter"] .modal h3, body[data-theme="glitter"] .modal label{ color:var(--glit-ink) !important; }

/* Glitter “sparkle” overlay (very subtle) */
body[data-theme="glitter"] .shell::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background:
    radial-gradient(2px 2px at 12% 18%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(2px 2px at 66% 28%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(1.5px 1.5px at 38% 72%, rgba(255,255,255,.40), transparent 60%),
    radial-gradient(1.5px 1.5px at 86% 78%, rgba(255,255,255,.35), transparent 60%);
  opacity:.55;
  mix-blend-mode:screen;
  animation:pbSparkle 6s ease-in-out infinite;
}
@keyframes pbSparkle{ 0%,100%{opacity:.38; transform:translateY(0)} 50%{opacity:.60; transform:translateY(-2px)} }

/* Terminal Hacker (classic green matrix but readable) */
body[data-theme="terminal"]{
  --term-bg:#04140c;
  --term-panel:rgba(5,22,14,.78);
  --term-border:rgba(0,255,110,.22);
  --term-ink:#d9ffe6;
  --term-muted:#9cebb8;
  --term-accent:#00ff6e;
  color:var(--term-ink);
  background:
    radial-gradient(1200px 800px at 30% 10%, rgba(0,255,110,.10), transparent 55%),
    linear-gradient(180deg, #020c07, #04140c);
}
body[data-theme="terminal"] *{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
body[data-theme="terminal"] .shell{ background:rgba(0,0,0,.35); box-shadow:0 24px 90px rgba(0,0,0,.55); }
body[data-theme="terminal"] .screen{ background:rgba(0,0,0,.25); }
body[data-theme="terminal"] .panel{ background:var(--term-panel); border-color:var(--term-border); }
body[data-theme="terminal"] .topbar{ background:rgba(0,0,0,.28); border-color:var(--term-border); }
body[data-theme="terminal"] .nav{ background:rgba(0,0,0,.22); border-color:var(--term-border); }
body[data-theme="terminal"] .navbtn{ color:var(--term-ink); border-color:rgba(0,255,110,.18); }
body[data-theme="terminal"] .navbtn--active{ background:rgba(0,255,110,.10); border-color:rgba(0,255,110,.35); box-shadow:0 0 0 3px rgba(0,255,110,.10) inset; }
body[data-theme="terminal"] .pill{ color:var(--term-ink); border-color:rgba(0,255,110,.18); }
body[data-theme="terminal"] .pill.pill--active{ background:rgba(0,255,110,.12); }
body[data-theme="terminal"] .btn{ color:var(--term-ink); border-color:rgba(0,255,110,.22); background:rgba(0,0,0,.18); }
body[data-theme="terminal"] .btn--primary{ background:rgba(0,255,110,.14); border-color:rgba(0,255,110,.38); }
body[data-theme="terminal"] .btn:hover{ filter:brightness(1.05); transform:translateY(-1px); }
body[data-theme="terminal"] input, body[data-theme="terminal"] textarea, body[data-theme="terminal"] .field{ background:rgba(0,0,0,.22); color:var(--term-ink); border-color:rgba(0,255,110,.22); }
body[data-theme="terminal"] .muted{ color:var(--term-muted) !important; }
body[data-theme="terminal"] .modal{ background:rgba(0,0,0,.68) !important; border-color:rgba(0,255,110,.28) !important; }
body[data-theme="terminal"] .modal__head{ background:rgba(0,0,0,.72) !important; border-bottom-color:rgba(0,255,110,.22) !important; }
body[data-theme="terminal"] .modal h3, body[data-theme="terminal"] .modal label{ color:var(--term-ink) !important; }

/* Terminal: Library sidebar readability (avoid light-on-light) */
body[data-theme="terminal"] .wsGroup{ background:rgba(0,0,0,.32); border-color:rgba(0,255,110,.22); }
body[data-theme="terminal"] .wsGroup summary{ color:var(--term-ink); }
body[data-theme="terminal"] .libws__projbtn{ background:rgba(0,0,0,.42); border-color:rgba(0,255,110,.22); color:var(--term-ink); }
body[data-theme="terminal"] .libws__projbtn:hover{ background:rgba(0,0,0,.58); }
body[data-theme="terminal"] .libws__projbtn.is-active{ background:rgba(0,0,0,.72); border-color:rgba(0,255,110,.52); }


/* Scanlines overlay */
body[data-theme="terminal"] .screen::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,.00),
    rgba(0,0,0,.00) 2px,
    rgba(0,0,0,.16) 3px
  );
  opacity:.35;
  mix-blend-mode:multiply;
}

/* A little “matrix drift” on big empty areas */
body[data-theme="terminal"] .panel__body::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:linear-gradient(180deg, rgba(0,255,110,.08), transparent 35%, rgba(0,255,110,.06));
  opacity:.12;
  animation:pbDrift 8s ease-in-out infinite;
}
@keyframes pbDrift{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }

/* Small layout tweaks per theme */
body[data-theme="glitter"] .nav{ padding:14px; }
body[data-theme="terminal"] .nav{ padding:12px; }
body[data-theme="terminal"] .nav__title{ opacity:.75; }


/* Prompt Check: reasoning lens selector */
.pc__lens{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin:10px 0 12px;}
.pc__lensLabel{margin:0;}
.pc__lensSelect{max-width:260px;}

.chip{display:inline-flex;align-items:center;padding:2px 8px;border:1px solid rgba(0,0,0,0.12);border-radius:999px;font-size:12px;line-height:18px;background:rgba(255,255,255,0.75);}
.chip--mode{margin-left:10px;}
.vault__meta{display:flex;align-items:center;gap:8px;margin-bottom:8px;}


/* =============================
   UI readability fixes (2026-02)
   Focus: Neon Grid / Candy Console / Fancy Glitter / Terminal Hacker
   ============================= */

/* Retro: ensure long prompt blocks are dark so light text stays readable */
body[data-theme="retro"] .pre{
  background: rgba(0,0,0,.35);
  border-color: rgba(255,255,255,.18);
  color:#f0f0ff;
}

/* Fancy Glitter: make it a true light theme (dark text on bright surfaces) */
body[data-theme="glitter"]{
  --accent: var(--glit-teal);
  color: var(--glit-ink);
  background: linear-gradient(180deg, #f6f0ff 0%, #e9f3ff 45%, #f2fffe 100%);
}
body[data-theme="glitter"] .topbar,
body[data-theme="glitter"] .footer{
  background: rgba(255,255,255,.88);
  color: var(--glit-ink);
  border-color: rgba(18,182,176,.22);
}
body[data-theme="glitter"] .screen{
  border-color: rgba(18,182,176,.20);
  box-shadow: 0 30px 90px rgba(0,0,0,.25);
}
body[data-theme="glitter"] .screen__menu,
body[data-theme="glitter"] .screen__content{
  background: rgba(255,255,255,.86);
  color: var(--glit-ink);
  border-color: rgba(18,182,176,.18);
}
body[data-theme="glitter"] .menu__title{ color: rgba(11,36,48,.65); }
body[data-theme="glitter"] .menu__item:hover{ background: rgba(18,182,176,.08); }
body[data-theme="glitter"] .menu__item.is-active{
  background: rgba(18,182,176,.12);
  border-color: rgba(18,182,176,.28);
}
body[data-theme="glitter"] .navbtn{
  background: rgba(255,255,255,.82);
  border-color: rgba(11,36,48,.12);
  color: var(--glit-ink);
}
body[data-theme="glitter"] .navbtn.is-active{
  background: rgba(18,182,176,.14);
  border-color: rgba(18,182,176,.35);
}
body[data-theme="glitter"] .card,
body[data-theme="glitter"] .pc__section,
body[data-theme="glitter"] .panel{
  background: rgba(255,255,255,.88);
  border-color: rgba(11,36,48,.10);
  color: var(--glit-ink);
}
body[data-theme="glitter"] .muted,
body[data-theme="glitter"] .pc__muted{ color: var(--glit-muted); }

body[data-theme="glitter"] .btn{
  background: rgba(18,182,176,.10);
  border-color: rgba(18,182,176,.28);
  color: var(--glit-ink);
}
body[data-theme="glitter"] .btn:hover{
  background: rgba(18,182,176,.14);
  border-color: rgba(18,182,176,.34);
}
body[data-theme="glitter"] .btn--primary{
  background: rgba(18,182,176,.18);
  border-color: rgba(18,182,176,.42);
}
body[data-theme="glitter"] .field__input,
body[data-theme="glitter"] textarea,
body[data-theme="glitter"] input[type=password],
body[data-theme="glitter"] .output{
  background: rgba(255,255,255,.95);
  color: var(--glit-ink);
  border-color: rgba(11,36,48,.12);
}
body[data-theme="glitter"] .pre,
body[data-theme="glitter"] .pc__pre{
  background: rgba(255,255,255,.92);
  color: var(--glit-ink);
  border-color: rgba(11,36,48,.10);
}
body[data-theme="glitter"] .modal{
  background: rgba(255,255,255,.96) !important;
  border-color: rgba(18,182,176,.25) !important;
  color: var(--glit-ink) !important;
}
body[data-theme="glitter"] .modal__head{
  background: rgba(255,255,255,.92) !important;
  border-bottom-color: rgba(11,36,48,.10) !important;
}

/* Terminal Hacker: soften neon + lift contrast */
body[data-theme="terminal"]{
  --term-accent: rgba(26,205,128,1);
  color:#e7fff0;
  background:
    radial-gradient(1200px 800px at 15% 10%, rgba(26,205,128,.14), transparent 55%),
    radial-gradient(900px 650px at 85% 25%, rgba(66,190,255,.10), transparent 55%),
    linear-gradient(180deg, #06140d 0%, #030b06 100%);
}
body[data-theme="terminal"] .topbar,
body[data-theme="terminal"] .footer{
  background:rgba(3,12,7,.86);
  border-color:rgba(26,205,128,.18);
}
body[data-theme="terminal"] .screen{
  border-color:rgba(26,205,128,.16);
}
body[data-theme="terminal"] .screen__menu,
body[data-theme="terminal"] .screen__content{
  background:rgba(3,12,7,.78);
}
body[data-theme="terminal"] .card{
  background:rgba(8,26,16,.74);
  border-color:rgba(26,205,128,.12);
}
body[data-theme="terminal"] .btn{
  background:rgba(26,205,128,.10);
  border-color:rgba(26,205,128,.22);
}
body[data-theme="terminal"] .btn:hover{
  background:rgba(26,205,128,.14);
  border-color:rgba(26,205,128,.30);
}
body[data-theme="terminal"] .btn--primary{
  background:rgba(26,205,128,.18);
  border-color:rgba(26,205,128,.38);
}
body[data-theme="terminal"] .field__input,
body[data-theme="terminal"] select,
body[data-theme="terminal"] textarea,
body[data-theme="terminal"] .output{
  color:#e7fff0;
  background:rgba(0,0,0,.20);
  border-color:rgba(26,205,128,.18);
}
body[data-theme="terminal"] .muted{ color:rgba(231,255,240,.72); }
body[data-theme="terminal"] .menu__item.is-active{
  background:rgba(26,205,128,.14);
  border-color:rgba(26,205,128,.28);
}

/* --- Library Workspace (v2) --- */
.libws{display:grid;grid-template-columns:230px 1fr;gap:14px;align-items:stretch;min-height:520px}
.libws__sidebar{background:rgba(0,0,0,.08);border:1px solid rgba(0,0,0,.12);border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:10px}
body[data-theme] .libws__sidebar{background:rgba(255,255,255,.35)}
.libws__sidehead{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:4px 2px}
.libws__projlist{display:flex;flex-direction:column;gap:4px;overflow:auto;max-height:360px;padding-right:2px}
.libws__projbtn{width:100%;text-align:left;display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:13px;padding:8px 8px;border-radius:12px;border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.55);cursor:pointer}
.libws__projbtn:hover{filter:brightness(0.98)}
.libws__projbtn.is-active{outline:2px solid rgba(0,0,0,.25)}
.libws__left{display:flex;align-items:center;gap:10px;min-width:0}
.libws__dot{width:8px;height:8px;border-radius:999px;flex:0 0 8px;box-shadow:0 0 0 2px rgba(255,255,255,.65)}
.libws__projname{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

.wsGroup{border:1px solid rgba(0,0,0,.08);border-radius:14px;background:rgba(255,255,255,.35);padding:8px}
.wsGroup + .wsGroup{margin-top:10px}
.wsGroup summary{list-style:none;cursor:pointer;user-select:none;font-weight:800;padding:6px 8px;border-radius:12px;display:flex;align-items:center;justify-content:space-between}
.wsGroup summary::-webkit-details-marker{display:none}
.wsGroup summary:after{content:'▾';opacity:.55}
.wsGroup[open] summary:after{content:'▴'}
.libws__projmeta{display:flex;align-items:center;gap:8px}
.libws__kebab{border:none;background:transparent;cursor:pointer;font-size:18px;line-height:1;padding:4px 6px;border-radius:10px}
.libws__kebab:hover{background:rgba(0,0,0,.08)}
.libws__sideactions{margin-top:auto;display:flex;gap:8px}

.libws__main{display:flex;flex-direction:column;gap:10px}
.libws__toolbarLeft{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.libws__toolbarLeft .btn{padding:7px 10px;border-radius:12px;font-size:13px}
.libws__toolbarLeft .btn--primary{box-shadow:inset 0 2px 0 rgba(255,255,255,.35)}
.libws__toolbarRight .field__input,
.libws__toolbarRight select{height:34px}
.libws__toolbarRight .check{font-size:13px}

.libws__toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.libws__toolbarRight{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.libws__toolbarRight #libSearch{min-width:320px}

.libws__subbar{display:flex;align-items:center;justify-content:space-between;gap:10px}
.libws__crumb{font-weight:700}
.libws__sections{display:flex;gap:6px;flex-wrap:wrap}
.libws__sectbtn{border:1px solid rgba(0,0,0,.12);background:rgba(255,255,255,.55);padding:6px 10px;border-radius:999px;cursor:pointer}
.libws__sectbtn.is-active{outline:2px solid rgba(0,0,0,.25)}

.libws__grid{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:1300px){.libws__grid{grid-template-columns:1fr 1fr}}

.libws__editgrid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width:900px){.libws{grid-template-columns:1fr}.libws__editgrid{grid-template-columns:1fr}.libws__toolbarRight #libSearch{min-width:200px}}

/* modal */
.pbmodal__backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;padding:18px;z-index:9999}
.pbmodal{background:#fff;border-radius:16px;max-width:560px;width:100%;border:1px solid rgba(0,0,0,.15);box-shadow:0 20px 60px rgba(0,0,0,.25)}
body[data-theme] .pbmodal{background:rgba(255,255,255,.92)}
.pbmodal__hd{padding:14px 16px;border-bottom:1px solid rgba(0,0,0,.12);display:flex;align-items:center;justify-content:space-between;gap:10px}
.pbmodal__bd{padding:14px 16px;display:flex;flex-direction:column;gap:10px}
.pbmodal__ft{padding:14px 16px;border-top:1px solid rgba(0,0,0,.12);display:flex;justify-content:flex-end;gap:8px;flex-wrap:wrap}

/* Guide / onboarding */
.pbmodal--guide{max-width:640px}
.guide__tabs{display:flex;gap:8px;align-items:center;justify-content:flex-start;margin-bottom:6px}
.guide__tab{border:1px solid rgba(0,0,0,.14);background:rgba(255,255,255,.7);border-radius:999px;padding:8px 12px;font-weight:700;cursor:pointer}
.guide__tab.is-active{border-color:rgba(0,0,0,.25);background:rgba(0,0,0,.06)}
.guide__panel{display:flex;flex-direction:column;gap:10px}
.guide__slide{border:1px solid rgba(0,0,0,.12);border-radius:14px;padding:12px 12px;background:rgba(255,255,255,.55)}
.guide__title{font-weight:800;font-size:16px}
.guide__text{color:rgba(18,19,22,.8);line-height:1.45}
.guide__dots{display:flex;gap:8px;justify-content:center}
.guide__dot{width:10px;height:10px;border-radius:999px;border:1px solid rgba(0,0,0,.18);background:rgba(0,0,0,.08);cursor:pointer}
.guide__dot.is-active{background:rgba(0,0,0,.38)}
.guide__nav{display:flex;justify-content:space-between;gap:10px}
.guide__list{margin:0;padding-left:18px;color:rgba(18,19,22,.85)}
.guide__list li{margin:6px 0}

body[data-theme="terminal"] .guide__tab,
body[data-theme="terminal"] .guide__slide{background:rgba(0,0,0,.25);border-color:rgba(255,255,255,.14)}
body[data-theme="terminal"] .guide__tab{color:rgba(255,255,255,.92)}
body[data-theme="terminal"] .guide__tab.is-active{background:rgba(255,255,255,.12)}
body[data-theme="terminal"] .guide__text,
body[data-theme="terminal"] .guide__list{color:rgba(255,255,255,.84)}


/* =========================================================
   Theme readability patches (modals, selects, backgrounds)
   - Keeps latest app.js logic intact (CSS-only)
   ========================================================= */

/* 1) Modern Calm: silver outer background (desktop) */
body[data-theme="modern"]{
  background:
    radial-gradient(900px 650px at 25% 20%, rgba(0,0,0,.06), transparent 60%),
    radial-gradient(900px 650px at 80% 30%, rgba(0,0,0,.05), transparent 60%),
    linear-gradient(180deg, #f2f3f5 0%, #d6d9df 100%);
}

/* 2) Modal base: always readable */
.pbmodal{
  color:#121316;
}
.pbmodal .muted{color:rgba(18,19,22,.72)}
.pbmodal .field__input,
.pbmodal select,
.pbmodal input[type="text"],
.pbmodal input[type="password"],
.pbmodal textarea{
  color:#121316;
  background:rgba(255,255,255,.92);
  border-color:rgba(0,0,0,.18);
}

/* 3) Retro: Neon Grid + Candy Console — dark modal to avoid white-on-white */
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal{
  background: rgba(8,8,16,.94);
  border-color: rgba(255,255,255,.16);
  color:#f0f0ff;
}
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal__hd,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal__hd,
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal__ft,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal__ft{
  border-color: rgba(255,255,255,.12);
}
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal .muted,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal .muted{
  color: rgba(240,240,255,.70);
}
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal .field__input,
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal select,
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal input[type="text"],
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal input[type="password"],
body[data-theme="retro"][data-variant="neon-grid"] .pbmodal textarea,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal .field__input,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal select,
body[data-theme="retro"][data-variant="candy-console"] .pbmodal input[type="text"],
body[data-theme="retro"][data-variant="candy-console"] .pbmodal input[type="password"],
body[data-theme="retro"][data-variant="candy-console"] .pbmodal textarea{
  background: rgba(0,0,0,.40);
  border-color: rgba(255,255,255,.18);
  color:#f0f0ff;
}

/* 4) Terminal Hacker — dark modal + readable text */
body[data-theme="terminal"] .pbmodal{
  background: rgba(2,18,10,.94);
  border-color: rgba(0,255,128,.18);
  color:#d6ffd9;
}
body[data-theme="terminal"] .pbmodal__hd,
body[data-theme="terminal"] .pbmodal__ft{
  border-color: rgba(0,255,128,.14);
}
body[data-theme="terminal"] .pbmodal .muted{
  color: rgba(214,255,217,.72);
}
body[data-theme="terminal"] .pbmodal .field__input,
body[data-theme="terminal"] .pbmodal select,
body[data-theme="terminal"] .pbmodal input[type="text"],
body[data-theme="terminal"] .pbmodal input[type="password"],
body[data-theme="terminal"] .pbmodal textarea{
  background: rgba(0,0,0,.24);
  border-color: rgba(0,255,128,.18);
  color:#d6ffd9;
}

/* 5) Dropdown/options readability in dark themes */
body[data-theme="retro"] select option{
  background:#0b0b16;
  color:#f0f0ff;
}
body[data-theme="terminal"] select option{
  background:#02110a;
  color:#d6ffd9;
}

/* 6) Terminal Hacker: left sidebar readability (no black-on-black) */
body[data-theme="terminal"] .menu__title{
  color: rgba(214,255,217,.80);
}
body[data-theme="terminal"] .menu__item{
  color:#d6ffd9;
  opacity:1;
}
body[data-theme="terminal"] .menu__item:hover{
  background: rgba(0,255,128,.10);
  border-color: rgba(0,255,128,.18);
}
body[data-theme="terminal"] .menu__item.is-active{
  background: rgba(0,255,128,.14);
  border-color: rgba(0,255,128,.28);
}

/* 7) Terminal Hacker: bigger text in Vault / Library / Golden areas */
body[data-theme="terminal"] .pre,
body[data-theme="terminal"] .pc__pre,
body[data-theme="terminal"] .output{
  font-size:15px;
  line-height:1.45;
}
body[data-theme="terminal"] .output--input{
  font-size:15px;
  line-height:1.45;
}

/* Terminal mode: Library card prompt blocks (pre.pre--sm) were inheriting the default light background.
   Fix: make <pre class="pre"> use the same dark surface as inputs so green text stays readable. */
body[data-theme="terminal"] .pre,
body[data-theme="terminal"] .pc__pre{
  background: rgba(0,0,0,.24);
  border-color: rgba(26,205,128,.18);
  color: #e7fff0;
}
body[data-theme="terminal"] .pre--sm{
  background: rgba(0,0,0,.24);
}

/* =========================================================
   UI tweaks (2026-02-15) — Library + Terminal readability
   - Larger category dropdown in Library toolbar
   - Bigger prompt text in Library (Golden/Working/Original)
   - Terminal theme: replace neon-green with warmer accent (#cc5302)
   ========================================================= */

/* 1) Library toolbar: make Category dropdown less cramped */
#libCat{
  min-width: 220px;
  height: 40px;
  padding: 10px 12px;
  line-height: 1.2;
}

/* Keep search usable next to bigger dropdown */
#libSearch{ min-height: 40px; }

/* 2) Library prompt blocks: bigger mono text */
#libList .pre,
#libList .pc__pre,
#libEditorWrap .output,
#libEditorWrap textarea.output,
#libEditorWrap textarea.field__textarea{
  font-size: 15px;
  line-height: 1.45;
}
@media (min-width: 1100px){
  #libList .pre,
  #libEditorWrap .output,
  #libEditorWrap textarea.output{
    font-size: 16px;
  }
}

/* 3) Terminal theme: warm + readable (no neon-green on green) */
body[data-theme="terminal"]{
  --term-accent-hex: #cc5302; /* warm orange */
  color: rgba(246,241,230,.92);
  background:
    radial-gradient(1200px 800px at 15% 10%, rgba(204,83,2,.10), transparent 55%),
    radial-gradient(900px 650px at 85% 25%, rgba(120,128,3,.08), transparent 55%),
    linear-gradient(180deg, #0f120e 0%, #070806 100%);
}

/* Chrome top/bottom bars */
body[data-theme="terminal"] .topbar,
body[data-theme="terminal"] .footer{
  background: rgba(10,10,9,.86);
  border-color: rgba(204,83,2,.18);
  color: rgba(246,241,230,.92);
}

/* Main frame */
body[data-theme="terminal"] .screen{
  border-color: rgba(204,83,2,.16);
  box-shadow: 0 34px 110px rgba(0,0,0,.55);
}
body[data-theme="terminal"] .screen__menu,
body[data-theme="terminal"] .screen__content{
  background: rgba(10,10,9,.78);
  border-color: rgba(204,83,2,.12);
}

/* Buttons + nav pills */
body[data-theme="terminal"] .btn,
body[data-theme="terminal"] .navbtn{
  color: rgba(246,241,230,.92);
  background: rgba(204,83,2,.10);
  border-color: rgba(204,83,2,.22);
}
body[data-theme="terminal"] .btn:hover,
body[data-theme="terminal"] .navbtn:hover{
  background: rgba(204,83,2,.14);
  border-color: rgba(204,83,2,.30);
}
body[data-theme="terminal"] .btn--primary{
  background: rgba(204,83,2,.18);
  border-color: rgba(204,83,2,.38);
}

/* Inputs + selects */
body[data-theme="terminal"] .field__input,
body[data-theme="terminal"] select,
body[data-theme="terminal"] textarea,
body[data-theme="terminal"] input[type=password],
body[data-theme="terminal"] .output{
  color: rgba(246,241,230,.92);
  background: rgba(0,0,0,.24);
  border-color: rgba(204,83,2,.18);
}

/* Muted text */
body[data-theme="terminal"] .muted{
  color: rgba(246,241,230,.70) !important;
}

/* Menu */
body[data-theme="terminal"] .menu__title{
  color: rgba(246,241,230,.78);
}
body[data-theme="terminal"] .menu__item{
  color: rgba(246,241,230,.92);
}
body[data-theme="terminal"] .menu__item:hover{
  background: rgba(204,83,2,.10);
  border-color: rgba(204,83,2,.18);
}
body[data-theme="terminal"] .menu__item.is-active{
  background: rgba(204,83,2,.14);
  border-color: rgba(204,83,2,.28);
}

/* Long prompt blocks in Terminal */
body[data-theme="terminal"] .pre,
body[data-theme="terminal"] .pc__pre{
  background: rgba(0,0,0,.26);
  border-color: rgba(204,83,2,.18);
  color: rgba(246,241,230,.92);
}

/* Dropdown options (important for Library categories in dark UI) */
body[data-theme="terminal"] select option{
  background:#0b0c0a;
  color: rgba(246,241,230,.92);
}

/* Scanlines: soften */
body[data-theme="terminal"] .screen::before{
  opacity:.22;
}

/* ---------------------------------------------------------
   UI polish (retro + terminal)
   - Color-code Library meta chips in Neon Grid / Candy Console
   - Improve readability of Tips/About in Neon Grid / Candy / Terminal
---------------------------------------------------------- */

/* 1) Library meta chips: Neon Grid + Candy Console */
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip{
  background: rgba(0,0,0,.28);
  border-color: rgba(255,255,255,.12);
  color: rgba(240,240,255,.92);
}

/* Per-chip accents (warmer tones like #798003 / #874401 / #cc5302) */
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--mode,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--mode{
  border-color: rgba(121,128,3,.55);
  color:#c7cf5a;
}
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--model,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--model{
  border-color: rgba(204,83,2,.55);
  color:#ffb07a;
}
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--tags,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--tags{
  border-color: rgba(135,68,1,.55);
  color:#ffd0a6;
}
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--proj,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--proj{
  border-color: rgba(130,210,255,.40);
  color: rgba(210,238,255,.95);
}
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--cat,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--cat{
  border-color: rgba(255,255,255,.14);
}
body[data-theme="retro"][data-variant="neon-grid"] .lib__meta .chip--cat .chip__dot,
body[data-theme="retro"][data-variant="candy-console"] .lib__meta .chip--cat .chip__dot{
  background: rgba(255,255,255,.60);
}

/* 2) Tips readability: Neon Grid + Candy Console */
body[data-theme="retro"][data-variant="neon-grid"] .tips__box,
body[data-theme="retro"][data-variant="candy-console"] .tips__box{
  background: rgba(0,0,0,.22);
  border-color: rgba(255,255,255,.14);
  color: rgba(240,240,255,.92);
}
body[data-theme="retro"][data-variant="neon-grid"] .tips__title,
body[data-theme="retro"][data-variant="candy-console"] .tips__title{
  opacity: .86;
  color: rgba(240,240,255,.82);
}
body[data-theme="retro"][data-variant="neon-grid"] .tips__list,
body[data-theme="retro"][data-variant="candy-console"] .tips__list{
  color: rgba(240,240,255,.92);
}

/* 3) Terminal: Tips + About (tone down neon green) */
body[data-theme="terminal"] .tips__box{
  background: rgba(0,0,0,.28);
  border-color: rgba(0,255,128,.18);
  color:#cfe3d3;
}
body[data-theme="terminal"] .tips__title{opacity:.86;color:rgba(207,227,211,.90)}
body[data-theme="terminal"] .tips__list{color:#cfe3d3}
body[data-theme="terminal"] .card__desc,
body[data-theme="terminal"] .card__note,
body[data-theme="terminal"] .card__body{color:#cfe3d3}
body[data-theme="terminal"] a{color:rgba(207,227,211,.92)}

/* =========================================================
   HOTFIX — Tips/About readability (Retro Neon/Candy + Terminal)
   Fixes: white-on-white in Tips + green-on-green in Terminal About.
   Kept scoped so we don't touch other themes.
   ========================================================= */

/* Retro (Neon Grid + Candy Console): force Tips boxes to be dark */
body[data-theme="retro"][data-variant="neon-grid"] .tips__box,
body[data-theme="retro"][data-variant="candy-console"] .tips__box{
  background: rgba(0,0,0,.32) !important;
  border-color: rgba(255,255,255,.16) !important;
  color: rgba(240,240,255,.94) !important;
}
body[data-theme="retro"][data-variant="neon-grid"] .tips__box *,
body[data-theme="retro"][data-variant="candy-console"] .tips__box *{
  color: rgba(240,240,255,.94) !important;
}
body[data-theme="retro"][data-variant="neon-grid"] .tips__title,
body[data-theme="retro"][data-variant="candy-console"] .tips__title{
  color: rgba(240,240,255,.84) !important;
  opacity: .90 !important;
}

/* Terminal: switch from neon-green ink to warm terminal ink (still “terminal”, just readable). */
body[data-theme="terminal"]{
  --term-ink: #efe6d6;
  --term-muted: rgba(239,230,214,.72);
  --term-accent: #cc5302;
  --term-accent-2: #798003;
  --term-border: rgba(204,83,2,.35);
  --term-panel: rgba(0,0,0,.30);
}

body[data-theme="terminal"] .tips__box{
  background: var(--term-panel) !important;
  border-color: var(--term-border) !important;
  color: var(--term-ink) !important;
}
body[data-theme="terminal"] .tips__box *{color: var(--term-ink) !important;}
body[data-theme="terminal"] .tips__title{color: var(--term-accent) !important; opacity:.92 !important;}

/* Terminal About page blocks/cards: kill green-on-green by forcing readable ink + darker panels */
body[data-theme="terminal"] .card,
body[data-theme="terminal"] .panel,
body[data-theme="terminal"] .pc__section,
body[data-theme="terminal"] .block,
body[data-theme="terminal"] .fold{
  background: var(--term-panel) !important;
  border-color: var(--term-border) !important;
  color: var(--term-ink) !important;
}
body[data-theme="terminal"] .card *,
body[data-theme="terminal"] .panel *,
body[data-theme="terminal"] .pc__section *,
body[data-theme="terminal"] .block *,
body[data-theme="terminal"] .fold *{
  color: var(--term-ink) !important;
}
body[data-theme="terminal"] a{color: var(--term-accent) !important;}


/* --- UI polish: ensure readability in Tips + Library chips across themes --- */
body[data-theme="glitter"] .fold{ background:rgba(255,255,255,.86); border-color:rgba(0,0,0,.10); }
body[data-theme="glitter"] .fold__body{ background:rgba(255,255,255,.70); }
body[data-theme="glitter"] .lib__meta .chip{ background:rgba(255,255,255,.88); }

/* Dark-theme library sidebar should not inherit light panel */
body[data-theme="modern"] .libws__sidebar,
body[data-theme="retro"] .libws__sidebar,
body[data-theme="terminal"] .libws__sidebar,
body[data-theme="nostalgia"] .libws__sidebar{
  background:rgba(0,0,0,.18);
  border-color:rgba(255,255,255,.10);
  color:inherit;
}

/* MySpace-ish micro-interactions (CSS-only, safe) */
@media (prefers-reduced-motion: no-preference){
  .btn, .topnav__tab, .nav__item, .pill, .chip{
    transition: transform .12s ease, box-shadow .18s ease, filter .18s ease;
  }
  .btn:hover, .topnav__tab:hover, .nav__item:hover{
    transform: translateY(-1px) scale(1.01);
    filter: brightness(1.05);
  }
  .btn:active, .topnav__tab:active, .nav__item:active{
    transform: translateY(0) scale(0.99);
  }
}

/* Subtle arcade grid overlay for all themes */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    linear-gradient(to bottom, rgba(255,255,255,.06), transparent 40%),
    repeating-linear-gradient(to right, rgba(255,255,255,.05) 0, rgba(255,255,255,.05) 1px, transparent 1px, transparent 64px),
    repeating-linear-gradient(to bottom, rgba(255,255,255,.04) 0, rgba(255,255,255,.04) 1px, transparent 1px, transparent 64px);
  mix-blend-mode: overlay;
  opacity:.35;
}
body[data-theme="glitter"] body::before{ opacity:.18; }


/* =========================================================
   Fix: Tips/About readability in Retro + Terminal themes
   - Fold panels were light while text is light -> "white on white"
   - Notes textarea (field__textarea) now matches inputs
   ========================================================= */
body[data-theme="retro"] .fold{
  background: rgba(0,0,0,.22);
  border-color: rgba(255,255,255,.14);
  color: rgba(240,240,255,.92);
}
body[data-theme="retro"] .fold__sum{ color: rgba(240,240,255,.92); }
body[data-theme="retro"] .fold__body{ color: rgba(240,240,255,.92); }

body[data-theme="terminal"] .fold{
  background: rgba(0,0,0,.30);
  border-color: rgba(204,83,2,.18);
  color: rgba(246,241,230,.92);
}
body[data-theme="terminal"] .fold__sum{ color: rgba(246,241,230,.92); }
body[data-theme="terminal"] .fold__body{ color: rgba(246,241,230,.92); }
