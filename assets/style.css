/* Prompting Buddy — Layout sanity (Phase 0)
   Goal: stop “infinite scroll walls”, make sections feel like tidy cards,
   and keep long AI outputs contained inside scrollable boxes.
*/

:root{
  --pb-bg:#efe9de;
  --pb-panel:#fff;
  --pb-text:#1b1b1b;
  --pb-muted:#666;
  --pb-accent:#ff8a3d;
  --pb-border:rgba(0,0,0,.10);
  --pb-shadow:0 10px 26px rgba(0,0,0,.10);
}

*{box-sizing:border-box;}

html,body{height:100%;}

body{
  margin:0;
  background:var(--pb-bg);
  color:var(--pb-text);
  font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height:1.35;
}

/* Page shell */
.shell{max-width:1040px;margin:0 auto;padding:14px 14px 46px;}

.screen{background:rgba(255,255,255,.55);border:1px solid var(--pb-border);border-radius:22px;box-shadow:var(--pb-shadow);overflow:hidden;}
.screen__content{padding:16px;}

/* Topbar */
.topbar{position:sticky;top:0;z-index:10;background:rgba(239,233,222,.92);backdrop-filter:saturate(120%) blur(4px);border-bottom:1px solid var(--pb-border);}
.topbar__inner{display:flex;align-items:flex-end;justify-content:space-between;gap:14px;padding:10px 14px;max-width:1040px;margin:0 auto;}
.topbar__left{display:flex;align-items:center;gap:10px;}
.topbar__logo{width:28px;height:28px;display:grid;place-items:center;border-radius:10px;border:1px solid rgba(0,0,0,.16);background:rgba(255,255,255,.70);font-weight:900;}
.topbar__title{font-weight:900;letter-spacing:.2px;line-height:1;}
.topbar__nav{display:flex;flex-wrap:wrap;gap:8px;align-items:center;}
.topbar__right{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:flex-end;}
.chip{
  appearance:none;
  border:1px solid rgba(0,0,0,.18);
  background:rgba(255,255,255,.65);
  color:var(--pb-text);
  border-radius:12px;
  padding:6px 10px;
  cursor:pointer;
  font-weight:600;
}
.chip:hover{background:rgba(255,255,255,.9);}
.chip.is-active{border-color:rgba(0,0,0,.28);background:rgba(255,255,255,.95);box-shadow:0 6px 18px rgba(0,0,0,.08);}

/* Status pills */
.pills{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.14);background:rgba(255,255,255,.65);font-weight:600;}
.pill b{font-weight:800;}

/* Buttons */
.btn{
  appearance:none;
  border:1px solid rgba(0,0,0,.20);
  background:rgba(255,255,255,.80);
  color:var(--pb-text);
  border-radius:12px;
  padding:8px 12px;
  cursor:pointer;
  font-weight:700;
}
.btn:hover{background:#fff;}
.btn:disabled{opacity:.55;cursor:not-allowed;}
.btn--mini{padding:6px 10px;font-weight:700;border-radius:10px;}

/* Cards */
.card{background:var(--pb-panel);border:1px solid var(--pb-border);border-radius:18px;box-shadow:var(--pb-shadow);overflow:hidden;}
.card--flat{box-shadow:none;background:rgba(255,255,255,.65);}
.card__body{padding:14px;}

/* Form fields */
.field{display:block;margin:12px 0;}
.field__label{display:block;font-weight:700;margin:0 0 6px;}
.field__textarea{
  width:100%;
  min-height:140px;
  resize:vertical;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.16);
  background:rgba(255,255,255,.85);
  font:inherit;
}

/* Pre blocks */
.pre{white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:rgba(250,244,233,.9);padding:12px 14px;}
.pre--sm{font-size:13px;line-height:1.45;}

/* Prompt Check layout */
.pc__wrap{display:grid;gap:12px;}
.pc__actions{display:flex;flex-wrap:wrap;gap:8px;align-items:center;}
.pc__meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--pb-muted);font-weight:600;}
.pc__out{display:grid;gap:12px;margin-top:10px;}

/* ===== THE KEY FIX: contain long text inside scrollable boxes ===== */
.pc__box,
.vault__item .pre,
#pcDiagnosis,
#pcMissing,
#pcImprovements,
#pcGolden,
#coachMeta{
  max-height:clamp(140px, 26vh, 280px);
  overflow:auto;
}

/* Golden prompt usually needs a bit more room */
.pc__golden{max-height:clamp(180px, 34vh, 420px);overflow:auto;}

/* Keep scrollbars from looking too harsh */
.pc__box::-webkit-scrollbar,
#pcDiagnosis::-webkit-scrollbar,
#pcMissing::-webkit-scrollbar,
#pcImprovements::-webkit-scrollbar,
#pcGolden::-webkit-scrollbar,
#coachMeta::-webkit-scrollbar,
.pc__golden::-webkit-scrollbar{height:10px;width:10px;}
.pc__box::-webkit-scrollbar-thumb,
#pcDiagnosis::-webkit-scrollbar-thumb,
#pcMissing::-webkit-scrollbar-thumb,
#pcImprovements::-webkit-scrollbar-thumb,
#pcGolden::-webkit-scrollbar-thumb,
#coachMeta::-webkit-scrollbar-thumb,
.pc__golden::-webkit-scrollbar-thumb{background:rgba(0,0,0,.18);border-radius:999px;}

/* Tips list */
.tips__list{margin:0;padding-left:18px;}
.tips__list li{margin:6px 0;}
.muted{color:var(--pb-muted);}

/* ===== Modal “paper card” look (Oddly Useful vibe) ===== */
.modal_backdrop{backdrop-filter:saturate(120%) blur(2px);}
.modal{
  background:linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.92));
  border:1px solid rgba(0,0,0,.08);
}
.modal h2,.modal h3{margin:10px 0 8px;}
.modal h2{font-size:18px;}
.modal h3{font-size:15px;color:#2b2b2b;}
.modal ul{margin:8px 0 12px 18px;}
.modal li{margin:6px 0;line-height:1.35;}

.modal button{
  appearance:none;
  border:1px solid rgba(0,0,0,.22);
  background:#fff;
  color:#222;
  padding:5px 10px;
  border-radius:10px;
  cursor:pointer;
}
.modal button:hover{filter:brightness(0.98);}

/* Golden prompt should read like a “paper note”, not a code block */
#pcModalGolden{
  white-space:pre-wrap;
  font-family:inherit;
  font-size:14px;
  line-height:1.45;
  background:#fbf6ec;
  border:1px solid rgba(0,0,0,.10);
  border-radius:14px;
  padding:12px 14px;
  box-shadow:0 10px 22px rgba(0,0,0,.08);
}

/* Meta prompt is allowed to look more “technical”, but still comfy */
#coachModalMeta{
  white-space:pre-wrap;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  line-height:1.45;
  background:rgba(0,0,0,.03);
  border:1px solid rgba(0,0,0,.08);
  border-radius:12px;
  padding:10px 12px;
}

.modal_backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;padding:24px;z-index:9999;}
.modal{
  width:min(980px,calc(100vw - 32px));
  max-height:calc(100vh - 64px);
  overflow:auto;
  color:var(--pb-text);
  border-radius:20px;
  box-shadow:0 18px 70px rgba(0,0,0,.45);
  padding:18px 18px 14px;

  /* “paper card” vibe (Oddly Useful-style) */
  background:
    radial-gradient(1200px 500px at 50% 0%, rgba(255,255,255,.95), rgba(255,255,255,.88) 40%, rgba(255,255,255,.82) 100%),
    linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86));
  border:1px solid rgba(0,0,0,.10);
}

/* modal header (title + close) */
.modal h2{font-size:18px;margin:6px 0 14px;display:flex;align-items:center;gap:10px;}
.modal h3{font-size:16px;margin:18px 0 8px;}
.modal p{color:var(--pb-muted);}

/* button polish (no “sausage casing”) */
.modal button{
  appearance:none;
  border:1px solid rgba(0,0,0,.18);
  background:rgba(255,255,255,.75);
  color:var(--pb-text);
  border-radius:10px;
  padding:6px 10px;
  cursor:pointer;
}
.modal button:hover{background:rgba(255,255,255,.92);}
.modal button:active{transform:translateY(1px);}

/* list spacing */
.modal ul{margin:0; padding-left:20px;}
.modal li{margin:6px 0; line-height:1.35;}

/* default <pre> inside modal should look like a neat paper block */
.modal pre{
  white-space:pre-wrap;
  word-break:break-word;
  background:rgba(250,244,233,.9);
  border:1px solid rgba(0,0,0,.10);
  border-radius:14px;
  padding:12px 14px;
  color:var(--pb-text);
  font-family:inherit;
  font-size:14px;
  line-height:1.45;
}

/* Golden Prompt gets extra readability */
#pcModalGolden{
  font-size:15px;
  line-height:1.55;
  background:rgba(255,250,240,.95);
}

/* Prompt Check: make Golden Prompt readable (wrap long lines) */
.pc__golden,
#goldText,
#pcModalGolden,
#pcGolden {
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
}
